<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<h:head>
	<ul>
		<li><a class="active">Home</a></li>

	</ul>
	<h3 style="margin-top: 0">Dummy Administration for mock Web Services - ConSufi</h3>
	<title>Dummy Administration for mock Web Services - ConSufi</title>


	<meta name="description" content="Contains a mock administration web services "></meta>
	<meta name="keywords" content="FileUpload, FileDownload"></meta>
	<meta name="author" content="John Fredy Castro Gonzalez, jocastro@bancolombia.com.co "></meta>


</h:head>


<h:body>

	<script type="text/javascript">
		function showStatus() {
			 statusDialog.show();
		}
		function hideStatus() {
 			statusDialog.hide();
		}
</script>


	<h:form id="form">

		<h:messages globalOnly="true" />

		<p:tabView>
			<p:tab title="File Uploader" id="pngDownload">




				<h:outputLabel for="urlPathUpload" value="Ruta del archivo a almacenar " />
				<p:inputText id="urlPathUpload" value="#{fileUploadView.urlPath}">
					<p:ajax event="blur" />
				</p:inputText>

				<h:panelGrid columns="2" cellpadding="10">
					<p:fileUpload id="fileUoloader" fileUploadListener="#{fileUploadView.handleFileUpload}" cancelLabel="Cancelar" multiple="true"
						allowTypes="/(\.|\/)(xml|xml\.p7m)$/" description="Select Images" required="true" uploadLabel="Subir" label="Escoger Archivos" process="@this" />
					<p:message id="msgUpload" for="fileUoloader" display="text" />

				</h:panelGrid>
			</p:tab>


			<p:tab title="File Downloader">
				<h:panelGrid columns="2" cellpadding="10" id="pngUpload">


					<p:outputLabel for="pathFile" value="Editable: " />
					<p:selectOneMenu id="pathFile" value="#{selectOneMenuView.path}" effect="fold" editable="false">
						<p:ajax listener="#{dtBasicView.onPathChange(selectOneMenuView.path)}" update="fileTable" />
						<f:selectItem itemLabel="Select One" itemValue="" />
						<f:selectItems value="#{selectOneMenuView.paths}" />
					</p:selectOneMenu>
				</h:panelGrid>
				<br></br>



				<p:dataTable id="fileTable" var="file" value="#{dtBasicView.listFileDetail}" style="width:1600px; overflow: auto;">
					<p:column headerText="File Name"  style="min-width:100px; max-width:300px;">
						<h:outputText value="#{file.name}" />
					</p:column>

					<p:column headerText="Path/Url"  style="min-width:100px; max-width:300px;">
						<h:outputText value="#{file.path}" />
					</p:column>

					<p:column headerText="size"  style="min-width:100px; max-width:300px;">
						<h:outputText value="#{file.size}" />
					</p:column>


					<p:column headerText="Download">
						<p:commandButton value="Download" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="pi pi-arrow-down">
							<p:fileDownload value="#{fileDownloadView.prepDownload(file.name, file.path)}" />
						</p:commandButton>
					</p:column>

				</p:dataTable>

			</p:tab>

		</p:tabView>

	</h:form>

</h:body>
</html>